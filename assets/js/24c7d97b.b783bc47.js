"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[137],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),d=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=d(e.components);return r.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=d(t),m=a,g=p["".concat(s,".").concat(m)]||p[m]||u[m]||i;return t?r.createElement(g,o(o({ref:n},c),{},{components:t})):r.createElement(g,o({ref:n},c))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=p;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var d=2;d<i;d++)o[d]=t[d];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},3183:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(7294);function a(e){return r.createElement("div",{className:"api-endpoint"},r.createElement("div",{className:"api-endpoint-header"},r.createElement("div",{className:"api-endpoint-method "+e.method},e.method),r.createElement("code",null,e.path),r.createElement("div",{className:"api-endpoint-protection",title:e.unprotected?"Authentication is not required for this endpoint":"Authentication is required for this endpoint"},e.unprotected?"\ud83d\udd13":"\ud83d\udd12")),r.createElement("div",{className:"api-endpoint-content"},e.children))}},8268:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return d},metadata:function(){return c},toc:function(){return u},default:function(){return m}});var r=t(7462),a=t(3366),i=(t(7294),t(3905)),o=t(3183),l=["components"],s={title:"Create CONFIRMED Booking"},d=void 0,c={unversionedId:"api/create-confirmed-booking",id:"api/create-confirmed-booking",title:"Create CONFIRMED Booking",description:"---",source:"@site/docs/api/create-confirmed-booking.md",sourceDirName:"api",slug:"/api/create-confirmed-booking",permalink:"/lodi-api-documentation/api/create-confirmed-booking",tags:[],version:"current",frontMatter:{title:"Create CONFIRMED Booking"},sidebar:"docs",previous:{title:"Compute Shipper-Chargeable Fee",permalink:"/lodi-api-documentation/api/compute-shipper-chargeable-fee"},next:{title:"Cancel Booking",permalink:"/lodi-api-documentation/api/cancel-booking"}},u=[{value:"Request",id:"request",children:[{value:"Header",id:"header",children:[],level:3},{value:"Body",id:"body",children:[{value:"Example request body:",id:"example-request-body",children:[],level:4}],level:3}],level:2},{value:"Response",id:"response",children:[{value:"Success",id:"success",children:[{value:"Status Code: 200",id:"status-code-200",children:[],level:4}],level:3},{value:"Error",id:"error",children:[{value:"Status Code: 401",id:"status-code-401",children:[],level:4},{value:"Status Code: 400",id:"status-code-400",children:[],level:4}],level:3}],level:2}],p={toc:u};function m(e){var n=e.components,t=(0,a.Z)(e,l);return(0,i.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("hr",null),(0,i.kt)(o.Z,{path:"/api/bookings",method:"post",mdxType:"ApiEndpoint"},(0,i.kt)("h2",{id:"request"},"Request"),(0,i.kt)("h3",{id:"header"},"Header"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"../authentication"},(0,i.kt)("strong",{parentName:"a"},"Authorization"))," (string, required)")),(0,i.kt)("h3",{id:"body"},"Body"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"customer_id_no")," (string, required) Customer ID Number, 8-alphanumeric all-caps. Pattern: ",(0,i.kt)("inlineCode",{parentName:"li"},"^[A-Z0-9]{8}$")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"vehicle_type_id")," (uuid, required) Vehicle Type ID. Format: ",(0,i.kt)("inlineCode",{parentName:"li"},"uuid")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"reference_no")," (string, required) Booking Reference Number, 255 max length."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"booking")," (object, required) Pickup details.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"address")," (string, required) Address, 255 max length."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"latitude")," (string) Latitude."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"longitude")," (string) Longitude."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"zip_code")," (string, required) ZIP Code, 4-digit. Pattern: ",(0,i.kt)("inlineCode",{parentName:"li"},"^[0-9]{4}$")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"full_name")," (string, required) Sender Full Name, 255 max length."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"contact_no")," (string, required) Sender Contact number, 10-digit number, starts with 9. Pattern: ",(0,i.kt)("inlineCode",{parentName:"li"},"^9[0-9]{9}$")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"special_note")," (string) Pickup special note, 255 max length."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"deliveries")," (array","[object]",", required at least one delivery) Delivery / Deliveries details.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"address")," (string, required) Address, 255 max length."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"latitude")," (string) Latitude."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"longitude")," (string) Longitude."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"zip_code")," (string, required) ZIP Code, 4-digit. Pattern: ",(0,i.kt)("inlineCode",{parentName:"li"},"^[0-9]{4}$")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"is_charged_to_sender")," (boolean, required) If the delivery service fee will be charged to the sender / pickup."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"full_name")," (string, required) Receiver Full Name, 255 max length."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"contact_no")," (string, required) Receiver Contact number, 10-digit number, starts with 9. Pattern: ",(0,i.kt)("inlineCode",{parentName:"li"},"^9[0-9]{9}$")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"items")," (array","[object]",") Delivery items.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"name")," (string, required) Item name, 255 max length."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"qty")," (integer) Item quantity, minimum of 1."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"description")," (string) Item description, 255 max length.")))))),(0,i.kt)("h4",{id:"example-request-body"},"Example request body:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "customer_id_no": "ABCD1234", // from the create customer api\'s response, customer that creates the booking\n  "vehicle_type_id": "1ee18d43-5b38-45a9-9ef5-1ee3a17d90b9", // from the retrieve vehicle types api\'s response\n  "reference_no": "XXXXXXXX", // might be your own booking number\n  "booking": {\n    "address": "Code Disruptors, Inc. Kalaw Building Complex, National Hwy Los Ba\xf1os, Laguna 4030",\n    "zip_code": "4030",\n    "full_name": "Joema Nequinto", // sender name\n    "contact_no": "9123456789", // sender contact number\n    "special_note": "Call me if you are near" // pickup special note\n  },\n  "deliveries": [\n    {\n      "address": "Bayside Calios Santa Cruz, Laguna",\n      "zip_code": "4009",\n      "is_charged_to_sender": true,\n      "full_name": "Aubrey Nequinto", // receiver name\n      "contact_no": "9123456789", // receiver contact number\n      "special_note": "Near Danilas Resort", // delivery special note\n      "items": [\n        {\n          "name": "Laptop",\n          "qty": 1,\n          "description": "Company laptop"\n        }\n      ]\n    }\n  ]\n}\n')),(0,i.kt)("h2",{id:"response"},"Response"),(0,i.kt)("h3",{id:"success"},"Success"),(0,i.kt)("h4",{id:"status-code-200"},"Status Code: 200"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "success": true,\n  "message": "Successfully created booking",\n  "data": {\n    "reference_no": "XXXXXXXX", // from request body, might be your booking number\n    "payment_mode": "CASH", // default payment mode of bookings via api\n    "status": "CONFIRMED", // booking\'s status\n    "service_fee": "250.00", // amount to be charged to the sender (unpaid cancellation fees is not yet included)\n    "total_fee": "250.00", // total amount to be charged to the sender (inclusive of the chargeable amount from unpaid cancellation fees)\n    "latitude": "14.141414", // pickup latitude, if not provided then the geocoded from address\n    "longitude": "121.121121", // pickup longitude, if not provided then the geocoded from address\n    "address": "Los Banos, Laguna", // pickup address\n    "sender_name": "Joema Nequinto", // sender full name\n    "sender_contact_no": "9123456789", // sender contact number, will send an SMS here upon rider start pickup trip\n    "special_note": "Call me if you are here", // pickup special note\n    "total_package_qty": 1, // sum of all delivery items quantity\n    "total_receivers_service_fee": 0, // sum of all delivery service fee that are charged to the receiver\n    "total_distance": 25000, // total distance to be travelled by the rider\n    "chargeable_distance": 25000, // distance to be charged to the sender\n    "total_drops": 1, // number of drops\n    "deliveries": [\n      // list of updated deliveries, with other fields\n      {\n        "order": 1, // drop order\n        "status": "PENDING", // delivery pending status\n        "latitude": "14.1825750", // delivery latitude, if not provided then the geocoded from address\n        "longitude": "121.2413660", // delivery longitude, if not provided then the geocoded from address\n        "address": "Road, Los Banos, Laguna", // delivery address\n        "receiver_name": "Aubrey Nequinto", // receiver full name\n        "receiver_contact_no": "9123456789", // receiver contact number\n        "special_note": "Near Danilas Resort", // delivery special note\n        "is_charged_to_sender": true, // if true then charged to sender, else charged to receiver\n        "service_fee": null, // this will have a value if is_charged_to_sender = false\n        "distance": 25000, // distance from previous address\n        "distance_from_sender": 25000, // distance from sender / pickup (delivery)\n        "distance_to_sender": 25000, // distance to sender / pickup (rts)\n        "item_description": "Delivery Items", // default item description of bookings via api\n        "items": [\n          {\n            "name": "Laptop",\n            "qty": 1,\n            "description": "Company Laptop"\n          }\n        ]\n      }\n    ],\n    "unpaid_cancellation_fees": {\n      "chargeable_amount": 0, // to be charged also to the sender in this booking\n      "chargeable_ref_booking_nos": [], // list of booking nos, chargeable_amount is computed from here\n      "chargeable_ref_booking_ids": [], // list of booking ids, chargeable_amount is computed from here\n      "non_chargeable_amount": 0, // not charged to the sender, this is already charged from previous ongoing booking that has not yet been paid but will be paid\n      "non_chargeable_booking_nos": [], // list of booking nos, non_chargeable_amount is computed from here\n      "cancellation_fee_limit": 450 // value in settings\n    },\n    "has_nearby_riders": true // if true then rider pairing is ongoing, if false then no nearby riders\n  }\n}\n')),(0,i.kt)("h3",{id:"error"},"Error"),(0,i.kt)("h4",{id:"status-code-401"},"Status Code: 401"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "success": false,\n  "message": "Unauthorized"\n}\n')),(0,i.kt)("h4",{id:"status-code-400"},"Status Code: 400"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "success": false,\n  "message": "Reference No (XXXXXX) already exists"\n}\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "success": false,\n  "message": "CASH payment mode is not allowed due to reached cancellation fee limit",\n  "context": "The sum of chargeable_amount, non_chargeable_amount, and cancellation_fee must not be greater than cancellation_fee_limit.",\n  "data": {\n    "total": 500,\n    "chargeable_amount": 200,\n    "non_chargeable_amount": 200,\n    "cancellation_fee": 100,\n    "cancellation_fee_limit": 450\n  }\n}\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "success": false,\n  "message": "Failed to create booking",\n  "context": "Failed validations in validateBookingViaApi",\n  "errors": [\n    // at least one error message will be here\n    "Invalid Customer ID No.", // if provided customer_id_no is not found\n    "Invalid Vehicle Type", // if provided vehicle_type_id is not found\n    "Invalid pickup latitude", // if booking.latitude is provided and invalid format\n    "Invalid pickup longitude", // if booking.longitude is provided and invalid format\n    "Invalid drop 1 latitude", // if delivery latitude is provided and invalid format\n    "Invalid drop 1 longitude", // if delivery longitude is provided and invalid format\n    "Pickup with zip code \'4030\' is not serviceable.", // if booking.zip_code is not in covered postal code or inactive\n    "Drop 1 with zip code \'4009\' is not serviceable." // if delivery zip_code is not in covered postal code or inactive\n  ]\n}\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "success": false,\n  "message": "Failed to create booking",\n  "context": "Failed to geocode address or has consecutive address",\n  "errors": [\n    // at least one error message will be here\n    "Unable to geocode pickup address (booking.address)", // if booking\'s lat & lng are not provided, and the provided address cannot be geocoded\n    "Unable to geocode drop ({order}) address (delivery.address)", // if delivery\'s lat & lng are not provided, and the provided address cannot be geocoded\n    "Consecutive addresses are found" // if there\'s consecutive lat & lng\n  ],\n  "data": {\n    // if there\'s a consecutive address with the same lat & lng\n    "consecutive_addresses": [\n      {\n        "previous": {\n          "name": "Pickup (booking.address)",\n          "lat": "14.178909",\n          "lng": "121.2364262",\n        },\n        "current: {\n          "name": "Drop 1 (delivery.address)",\n          "lat": "14.178909",\n          "lng": "121.2364262"\n        }\n      }\n    ]\n  }\n}\n'))))}m.isMDXComponent=!0}}]);